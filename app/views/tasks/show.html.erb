<table>
  <thead>
    <tr>
      <th colspan="2">
        <h3>Task details</h3>
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td><h4>Title</h4></td>
      <td><%= @task.title %></td>
    </tr>
    <tr>
      <td><h4>Description</h4></td>
      <td><%= @task.description %></td>
    </tr>
    <tr>
      <td><h4>Deadline</h4></td>
      <td><%= @task.due_date %></td>
    </tr>
    <tr>
      <td><h4>Participants</h4></td>
      <td>
        <% if @task.participants.empty? %>
          No participants
        <% else %>
          <ul>
            <% @task.participants.each do |user| %>
              <li> <%= user.name %> <%= user.surname %></li>
            <% end %>
          </ul>
        <% end %>
      </td>
    </tr>
  </tbody>
</table>

<% if @task.participants.include?(current_user) %>
  <%= link_to "Leave task",
    { controller: :user_tasks, action: :leave },
    method: :delete,
    data: { confirm: "Are you sure?" },
    class: "btn" %>
<% else %>
  <%= link_to "Join task",
    { controller: "user_tasks", action: :assign },
    method: :post,
    class: "btn" %>
<% end %>

<%= link_to 'Edit', [:edit, @task.project, @task], class: "btn" %></td>
<%= link_to 'Destroy',
  [@task.project, @task],
  method: :delete,
  data: { confirm: 'Are you sure?' },
  class: "btn" %>

<%= link_to 'Back', project_tasks_path(@task.project), class: "btn" %>
